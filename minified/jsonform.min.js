/* jsonform.js */
/*
 Copyright Milfont Consulting.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
(function(k){k.fn.extend({version:"1.2.3",getJSON:function(c){var e={},a=this,h;"object"===typeof c&&(h=c,c=h.byId?h.byId:!1);a.find("input,textarea,select").each(function(f,b){if("radio"!=b.type||b.checked){var j=c?k.trim(b.id):k.trim(b.name),g="select-multiple"===b.type?k(b).val():b.value;""!==j&&("checkbox"==b.type&&(g=b.checked?!0:!1),a.merge(e,a.buildJson(j,g,h)))}});return e},populate:function(c,e){var a=this;(function f(b,j){for(var g in b)if(b[g]||0===b[g]){var i=b[g];if("object"==typeof i){var d=
!j?g:j+"\\."+g;if(k.isArray(i))for(var c in i)i[c]&&(parent_arr=d+"\\["+c+"\\]",f(i[c],parent_arr));else f(i,d)}else{var d=j?j+"\\."+g:g,l="[name='"+d+"']";e&&(l="#"+d);a.find(l).val(i)}}})(c);return this},buildJson:function(c,e,a){var h=a&&a.prefix?a.prefix:"",f=a&&a.suffix?a.suffix:"",b=function(a,b){var i;if(a.match(/\[(\d+)\]/)){i=a.match(/\[(\d+)\]/);var d=[];d[i[1]]=b;return d}return b};return function g(a,d,c){var d=d.split("."),e=d.shift();a[h+e.replace(/\[(\d+)\]/,"")+f]=0<d.length?b(e,g({},
d.join("."),c)):b(e,c);return a}({},c,e)},merge:function e(a,h){for(var f in h)"object"===typeof h[f]&&"undefined"!==typeof a[f]?e(a[f],h[f]):a[f]=h[f];return a}})})(jQuery);